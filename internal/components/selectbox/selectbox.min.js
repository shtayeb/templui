(()=>{(function(){"use strict";function p(t){let e=t.querySelector(".select-value"),o=t.querySelector('input[type="hidden"]'),c=t.getAttribute("data-tui-selectbox-content-id"),s=document.getElementById(c);if(!e||!s)return;let n=t.getAttribute("data-tui-selectbox-multiple")==="true",l=t.getAttribute("data-tui-selectbox-show-pills")==="true",r=e.getAttribute("data-tui-selectbox-placeholder")||"Select...",i=s.querySelectorAll('.select-item[data-tui-selectbox-selected="true"]');if(i.length===0){e.textContent=r,e.classList.add("text-muted-foreground"),o&&(o.value="");return}if(e.classList.remove("text-muted-foreground"),n){if(l){e.innerHTML="";let a=document.createElement("div");a.className="flex flex-wrap gap-1 items-center min-h-[1.5rem]";let h=!1,y=[];Array.from(i).forEach(u=>{let f=document.createElement("span");f.className="inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-md bg-primary text-primary-foreground";let m=document.createElement("span");m.textContent=u.querySelector(".select-item-text")?.textContent||"",f.appendChild(m);let d=document.createElement("button");d.className="ml-0.5 hover:text-destructive focus:outline-none",d.type="button",d.innerHTML="\xD7",d.setAttribute("data-tui-selectbox-pill-remove",""),d.setAttribute("data-tui-selectbox-value",u.getAttribute("data-tui-selectbox-value")),f.appendChild(d),y.push(f)}),y.forEach(u=>a.appendChild(u)),e.appendChild(a),requestAnimationFrame(()=>{let u=e.offsetWidth;if(a.scrollWidth>u-10&&i.length>3){let m=t.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";e.textContent=m.replace("{n}",i.length)}})}else{let a=t.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";e.textContent=a.replace("{n}",i.length)}let b=Array.from(i).map(a=>a.getAttribute("data-tui-selectbox-value")||"");o&&(o.value=b.join(","))}else{let b=i[0],a=b.querySelector(".select-item-text")?.textContent||"";e.textContent=a,o&&(o.value=b.getAttribute("data-tui-selectbox-value")||"")}}function x(t){let e=t.value.toLowerCase().trim(),o=t.closest("[data-tui-popover-id]");o&&o.querySelectorAll(".select-item").forEach(c=>{let s=c.querySelector(".select-item-text")?.textContent.toLowerCase()||"",n=c.getAttribute("data-tui-selectbox-value")?.toLowerCase()||"",l=!e||s.includes(e)||n.includes(e);c.style.display=l?"":"none"})}function g(t){if(t.getAttribute("data-tui-selectbox-disabled")==="true")return;let e=t.closest("[data-tui-popover-id]"),o=e?.id,c=document.querySelector(`[data-tui-selectbox-content-id="${o}"]`);if(!c)return;let s=c.getAttribute("data-tui-selectbox-multiple")==="true",n=t.getAttribute("data-tui-selectbox-selected")==="true";if(s||e.querySelectorAll(".select-item").forEach(r=>{r.setAttribute("data-tui-selectbox-selected","false"),r.classList.remove("bg-accent","text-accent-foreground");let i=r.querySelector(".select-check");i&&i.classList.replace("opacity-100","opacity-0")}),t.setAttribute("data-tui-selectbox-selected",(!n).toString()),n){t.classList.remove("bg-accent","text-accent-foreground");let r=t.querySelector(".select-check");r&&r.classList.replace("opacity-100","opacity-0")}else{t.classList.add("bg-accent","text-accent-foreground");let r=t.querySelector(".select-check");r&&r.classList.replace("opacity-0","opacity-100")}p(c);let l=c.querySelector('input[type="hidden"]');l&&l.dispatchEvent(new Event("change",{bubbles:!0})),!s&&window.closePopover&&(window.closePopover(o),setTimeout(()=>c.focus(),50))}document.addEventListener("click",t=>{if(t.target.matches("[data-tui-selectbox-pill-remove]")){t.stopPropagation();let c=t.target.getAttribute("data-tui-selectbox-value"),n=t.target.closest("button.select-trigger")?.getAttribute("data-tui-selectbox-content-id"),r=document.getElementById(n)?.querySelector(`.select-item[data-tui-selectbox-value="${c}"]`);r&&g(r);return}let e=t.target.closest(".select-item");if(e){t.preventDefault(),g(e);return}let o=t.target.closest("button.select-trigger");if(o){let c=o.getAttribute("data-tui-selectbox-content-id"),s=document.getElementById(c),n=s?.querySelector("[data-tui-selectbox-search]");n&&setTimeout(()=>{s.style.display!=="none"&&n.focus()},50)}}),document.addEventListener("keydown",t=>{let e=document.activeElement;if(e?.matches("button.select-trigger")&&(t.key.length===1||t.key==="Backspace")){t.preventDefault();let c=e.getAttribute("data-tui-selectbox-content-id");e.click(),setTimeout(()=>{let s=document.getElementById(c)?.querySelector("[data-tui-selectbox-search]");s&&(s.focus(),t.key!=="Backspace"&&(s.value=t.key))},50)}let o=e?.closest("[data-tui-popover-id]");if(o?.querySelector(".select-item")){if(t.key==="ArrowDown"||t.key==="ArrowUp"){t.preventDefault();let c=Array.from(o.querySelectorAll(".select-item")).filter(l=>l.style.display!=="none");if(c.length===0)return;let s=o.querySelector(".select-item:focus"),n=0;if(s){let l=c.indexOf(s);n=t.key==="ArrowDown"?(l+1)%c.length:(l-1+c.length)%c.length}c[n].focus()}else if(t.key==="Enter"&&e?.matches(".select-item"))t.preventDefault(),g(e);else if(t.key==="Escape"){let c=o.querySelector("[data-tui-selectbox-search]");if(e?.matches(".select-item"))c?.focus();else if(e===c&&window.closePopover){window.closePopover(o.id);let s=document.querySelector(`[data-tui-selectbox-content-id="${o.id}"]`);setTimeout(()=>s?.focus(),50)}}}}),document.addEventListener("input",t=>{t.target.matches("[data-tui-selectbox-search]")&&x(t.target)}),document.addEventListener("mouseover",t=>{let e=t.target.closest(".select-item");if(!e||e.getAttribute("data-tui-selectbox-disabled")==="true")return;let o=e.closest("[data-tui-popover-id]");o&&(o.querySelectorAll(".select-item").forEach(c=>{c.getAttribute("data-tui-selectbox-selected")!=="true"&&c.classList.remove("bg-accent","text-accent-foreground")}),e.getAttribute("data-tui-selectbox-selected")!=="true"&&e.classList.add("bg-accent","text-accent-foreground"))}),document.addEventListener("reset",t=>{t.target.matches("form")&&t.target.querySelectorAll(".select-container").forEach(e=>{let o=e.querySelector("button.select-trigger"),c=o?.getAttribute("data-tui-selectbox-content-id"),s=document.getElementById(c);if(s){s.querySelectorAll(".select-item").forEach(l=>{l.setAttribute("data-tui-selectbox-selected","false"),l.classList.remove("bg-accent","text-accent-foreground");let r=l.querySelector(".select-check");r&&r.classList.replace("opacity-100","opacity-0")});let n=s.querySelector("[data-tui-selectbox-search]");n&&(n.value="",x(n))}o&&p(o)})}),new MutationObserver(()=>{document.querySelectorAll(".select-container").forEach(t=>{let e=t.querySelector("button.select-trigger");e&&!e.hasAttribute("data-tui-selectbox-setup")&&(e.setAttribute("data-tui-selectbox-setup","true"),p(e))})}).observe(document.body,{childList:!0,subtree:!0})})();})();
